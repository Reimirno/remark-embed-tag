# remark-embed-tag

An elegant addition to markdown syntax to embed video/music/game/other contents from various sources.

This is a remark plugin that renders a html embed from a simple tag syntax in markdown.

This plugin can be used with [Astro](https://docs.astro.build/en/guides/markdown-content/#markdown-plugins), [Gatsby](https://www.gatsbyjs.com/tutorial/remark-plugin-tutorial/), [Docusaurus](https://docusaurus.io/docs/next/markdown-features/plugins) and all other frameworks that support [remark plugins](https://github.com/remarkjs/remark#plugins).

Write this in your markdown file:

```markdown
{% steam 1260810 %}
```

and it will get transformed to

```html
<iframe
  src="https://store.steampowered.com/widget/1260810/"
  frameborder="0"
  width="100%"
  height="190"
  ...
></iframe>
```

## Install

```bash
npm install remark-embed-tag
```

## Features

### Steam

```markdown
{% steam appid [optional_desc] %}
```

- `appid` (required): The Steam appid of the game.
- `optional_desc` (optional): The description of the game. If not provided, the game description pulled from Steam will be used.

Example:

```markdown
{% steam 1260810 %}

{% steam 1260810 "This is a game I made in 2021" %}
```

### Youtube

```markdown
{% youtube youtube_id [type] [useCookies] %}
```

- `youtube_id` (required): The Youtube video/playlist id.
- `type` (optional): The type of the embed. Default is `video`. Other options are `playlist`.
- `useCookies` (optional): Whether to use cookies. Default is `true`. If set to `false`, the embed will not store cookies which enhances privacy.

Example:

```markdown
{% youtube PJgEu_Ecuf8 %}

{% youtube PL17274CE9C384D8C7 'playlist' %}

{% youtube PJgEu_Ecuf8 false %}

{% youtube PL17274CE9C384D8C7 'playlist' false %}
```

### Spotify

```markdown
{% spotify spotify_id [type] %}
```

- `spotify_id` (required): The Spotify track/album/playlist id.
- `type` (optional): The type of the embed. Default is `track`. Other options are `album` and `artist`.

Example:

```markdown
{% spotify 2NniAhAtkRACaMeYt48xlD %}

{% spotify 2NniAhAtkRACaMeYt48xlD 'track' %}

{% spotify 1NAmidJlEaVgA3MpcPFYGq 'album' %}

{% spotify 2elBjNSdBE2Y3f0j1mjrql 'artist' %}
```

### Generic IFrame

For any other embeds, you can use the generic iframe tag.

```markdown
{% iframe src %}
```

- `src` (required): The source url of the iframe.

## Usage

### With Astro

See how to integrate remark plugins with Astro [here](https://docs.astro.build/en/guides/markdown-content/#markdown-plugins).

### With Gatsby

See how to integrate remark plugins with Gatsby [here](https://www.gatsbyjs.com/tutorial/remark-plugin-tutorial/).

### With Docusaurus

See how to integrate remark plugins with Docusaurus [here](https://docusaurus.io/docs/next/markdown-features/plugins).

### No framework

```javascript
import remark from "remark";
import embedTag from "remark-embed-tag";

remark()
  .use(embedTag)
  .process("Hello {% steam 1260810 %}", function (err, file) {
    if (err) throw err;
    console.log(String(file));
  });

// Output: Hello <iframe src="https://store.steampowered.com/widget/1260810/" frameborder="0" height="190"></iframe>
```

## Advanced Usage

### Fine-tuning iframe properties

You can also control the properties on the iframe generated by the plugin. The following properties can be set:

- `width`
- `height`
- `title`
- `frameBorder`
- `loading`
- `allowFullScreen`
- `allowTransparency`

For example, to set the width and height of the iframe:

```markdown
{% steam 1260810 %}(width=100%, height=200)
```

### Use this plugin with OEmbed-based plugins

I recommend using this plugin along with a OEmbed-based plugin like [remark-oembed](https://github.com/sergioramos/remark-oembed) as a fallback.

This way, you can have a very robust embed system, working for content that both support OEmbed (like YouTube) and those that don't (like Steam). Even for content that support OEmbed, you can use this plugin to have more control over the iframe properties.

## Credits

This embed-tag syntax is inspired by [Hexo's tag embed](https://github.com/hexojs/hexo-tag-embed). I used to be a Hexo user and I really liked the simplicity of the embed tag. Now, I am moving to Astro and I wanted to have the same feature. Hence, I created this plugin.

While coding, I referred to the following projects:

- [remark-hexo](https://github.com/bennycode/remark-hexo)
- [remark-oembed](https://github.com/sergioramos/remark-oembed)
- [hexo-tag-steamgame](https://github.com/HCLonely/hexo-tag-steamgame)

This package is bootstraped with [typescript-npm-package-starter](https://github.com/el3um4s/typescript-npm-package-starter)
